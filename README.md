# 🐶 PetWithU
<p align="center"><img src="https://user-images.githubusercontent.com/53294075/218286832-8953f862-d778-4ba3-a01d-e2e3fd9d54dd.png" width = "400px"></p>

Hi, we are team 'PetWithU'! 🤗
- 'PetWithU" is the final project team name and our service name consisting of students from the 41th Wecode Coding Boot Camp.
- It is an application that provides community services and sells pet products to users who have pets.
- We clone-coded the '[Today's house](https://ohou.se/)' web site.
    - 'Today's house' is an interior platform service launched by a Korean startup that provides all the services for interior design, from online housewarming contents to stores and expert construction services.

🖥️ [Demo video](https://youtu.be/Tx5LHiD54os)

<br>

## 🐩 Our Service
* We use the social login to simplify the membership process to increase user accessibility and convenience.
* When user creates a feed post, user can tag products that purchased on the site so that other users can access product information.
* Users can view the promenade filtered by region, so they can quickly find local information on the promenade.
    * We use the map API to mark the location of the promenade as coordinates on the map.
* Users can view a lot of collected posts on a single page.

<br>

## 🗓 Period
2023/01/30 ~ 2023/02/10 (About 2 weeks)

<br>

## 👥 Team Members
### Back-End

👑 [Judy Choi (Product Manager)](https://github.com/Judy-Choi)

### Front-End

👑 [SY Kang (Project Manager)](https://github.com/seoyunlefleuve), [KM Bae](https://github.com/bjy6439), [NH Kwon](https://github.com/skgusskgusgg)

<br>

## 💻 Tech Stack
Frond-End
<img src="https://img.shields.io/badge/Javscript-F7DF1E?style=flat&amp;logo=javascript&amp;logoColor=white">
<img src="https://img.shields.io/badge/React.js-61DAFB?style=flat&amp;logo=React&amp;logoColor=white">
<img src="https://img.shields.io/badge/React Router-CA4245?style=flat&amp;logo=ReactRouter&amp;logoColor=white">
<img src="https://img.shields.io/badge/styled-components-DB7093?style=flat&amp;logo=styled-components-DB7093&amp;logoColor=white">

Back-End
<img src="https://img.shields.io/badge/Node.js-339933?style=flat&amp;logo=Node.js&amp;logoColor=white">
<img src="https://img.shields.io/badge/Nodemon-76D04B?style=flat&amp;logo=Nodemon&amp;logoColor=white">
<img src="https://img.shields.io/badge/Express-000000?style=flat&amp;logo=Express&amp;logoColor=white">
<img src="https://img.shields.io/badge/MySQL-4479A1?style=flat&amp;logo=MySQL&amp;logoColor=white">
<img src="https://img.shields.io/badge/JWT-CC6699?style=flat&amp;logo=JSON&amp;logoColor=white">
<img src="https://img.shields.io/badge/Dbmate-009DC7?style=flat&amp;logo=Bcrypt&amp;logoColor=white">
<img src="https://img.shields.io/badge/Bcrypt-CA424?style=flat&amp;logo=Bcrypt&amp;logoColor=white">

Common
<img src="https://img.shields.io/badge/Git-F05032?style=flat&amp;logo=Git&amp;logoColor=white">
<img src="https://img.shields.io/badge/GitHub-181717?style=flat&amp;logo=GitHub&amp;logoColor=white">
<img src="https://img.shields.io/badge/Prettier-F7B93E?style=flat&amp;logo=prettier&amp;logoColor=white">
<img src="https://img.shields.io/badge/RestfulAPI-F7533E?style=flat&amp;logo=RestfulAPII&amp;logoColor=white">
<img src="https://img.shields.io/badge/VSCode-007ACC?style=flat&amp;logo=Visual Studio Code&amp;logoColor=white">
<img src="https://img.shields.io/badge/Postman-FF6C37?style=flat&amp;logo=Postman Code&amp;logoColor=white">
<img src="https://img.shields.io/badge/AWS-232F3E?style=flat&amp;logo=AWS Code&amp;logoColor=white">
<img src="https://img.shields.io/badge/AWS_EC2-FF9900?style=flat&amp;logo=AWS_EC2 Code&amp;logoColor=white">
<img src="https://img.shields.io/badge/AWS_RDS-527FFF?style=flat&amp;logo=AWS_RDS Code&amp;logoColor=white">
<img src="https://img.shields.io/badge/AWS_S3-569A31?style=flat&amp;logo=AWS_S3 Code&amp;logoColor=white">
<img src="https://img.shields.io/badge/Kakao_API-FFCD00?style=flat&amp;logo=Kakaotalk Code&amp;logoColor=white">

Communication
<img src="https://img.shields.io/badge/Slack-4A154B?style=flat&amp;logo=Slack&amp;logoColor=white">
<img src="https://img.shields.io/badge/Trello-0052CC?style=flat&amp;logo=Trello&amp;logoColor=white">
<img src="https://img.shields.io/badge/Notion-000000?style=flat&amp;logo=Notion&amp;logoColor=white">

<br>

## 🖼️ Example

<details>
    <summary>Show Images</summary>
    
!Images will be changed!
    


| Page | Screenshot | Developer |
| --- | --- | --- |
| DB Architecture/<br>Migration | <p align="center"><img src="https://user-images.githubusercontent.com/53294075/218289356-eff87768-d75e-4eee-aaa6-018ba378cd1b.png" width = "600px"></p><br>[Detail LINK](https://github.com/wecode-bootcamp-korea/41-2nd-PetWithU-backend/issues/5) | [BE] Judy Choi |
| Main<br>Nav Bar<br>Footer | <p align="center"><img src="https://user-images.githubusercontent.com/53294075/218318656-9fd2e054-85cc-4b21-b408-4e02aa701cea.png" width = "400px"></p> | [FE] KM Bae <br> [BE] Judy Choi |
| Kakao Login | <p align="center"><video src="https://user-images.githubusercontent.com/53294075/218317950-ed1901e7-c407-46fb-8ab4-2c0ce5aa0889.mov" width = "400px"></video></p> | [FE] KM Bae <br> [BE] Judy Choi |
| Feed Main | <p align="center"><video src="https://user-images.githubusercontent.com/53294075/218318417-6f7905c4-79b8-4189-9039-b74448c77f1e.mov" width = "400px"></video></p> | [FE] KM Bae <br> [BE] Judy Choi |
| Feed Detail | <p align="center"><img src="https://user-images.githubusercontent.com/53294075/218318656-9fd2e054-85cc-4b21-b408-4e02aa701cea.png" width = "400px"></p> | [FE] NH Kwon <br> [BE] Judy Choi |
| Feed<br>Collection | <p align="center"><img src="https://user-images.githubusercontent.com/53294075/218318656-9fd2e054-85cc-4b21-b408-4e02aa701cea.png" width = "400px"></p> | [FE] KM Bae <br> [BE] Judy Choi |
| Feed<br>Create | <p align="center"><img src="https://user-images.githubusercontent.com/53294075/218318751-77832b5f-7fcc-4dff-8812-6f60e7dc3a52.png" width = "400px"></p> | [FE] NH Kwon <br> [BE] Judy Choi |
| Search<br>Products | <p align="center"><img src="https://user-images.githubusercontent.com/53294075/218318797-f28cea71-fff5-40cf-a519-34a46c763052.png" width = "400px"></p> | [FE] KM Bae <br> [BE] Judy Choi |
| Product<br>detail | <p align="center"><img src="https://user-images.githubusercontent.com/53294075/218318852-d5d7c057-b2b5-4e75-9f2d-fdc41e526791.png" width = "400px"></p> | [FE] NH Kwon <br> [BE] Judy Choi |
| Promenade<br>Main | <p align="center"><img src="https://user-images.githubusercontent.com/53294075/218318951-24fb9ded-472f-4d3a-9755-0efb4e669960.png" width = "400px"><br><img src="https://user-images.githubusercontent.com/53294075/218319054-81b68955-4a06-4bf4-9ce6-ab55712eaeaa.png" width = "400px"></p> | [FE] SY Kang <br> [BE] Judy Choi |
| Promenade<br>Detail | <p align="center"><img src="https://user-images.githubusercontent.com/53294075/218318977-84391381-218b-4348-9f12-10e5101cb1af.png" width = "400px"></p> | [FE] SY Kang <br> [BE] Judy Choi |
| Promenade<br>Collection | <p align="center"><img src="https://user-images.githubusercontent.com/53294075/218319020-56fc3d6f-4c59-4039-85b2-dce1944f5080.png" width = "400px"></p> | [FE] SY Kang <br> [BE] Judy Choi |
| Carts | FE to be continued..  | [FE] NH Kwon <br> [BE] Judy Choi |
    
</details>

<br>

## 📑 API Documentation
[Postman Link](https://documenter.getpostman.com/view/24998473/2s935oLPdR)

<br>

## 🛠️ Dev Details

<details>
    <summary>Details</summary>
    
### 🗄️ Server & DataBase
- Set DB on AWS RDS to enable FE and users to access DB at any time.

### 👨‍👩‍👧‍👦 Users
#### Login / Sign Up
- Social login and sign in with Kakao SDK for JavaScript
- After login, use JWT instead of password for user authentication/authorization (to improve security)
- Encrypt user's password using Bcrypt and save it to DB
    - Manage user's account information more securely

#### Follow / Following
- Follow / Following between users

### 🦴 Products
#### Main page
- Today's products : Sort each category's products in descending order by sales volume and extract only the top 1 product 
- All products : Sort all products in descending order by sales volume

#### Detail page
- View the details of the product

### 🖼️ Feed
- Authorization after user authentication by verifying the JWT of the signed-in user before all APIs are runned.

#### Main Page
- Efficient request from FE by using query parameters
- Pagination
  - In order to support Page Nation of FE, default 9 datas (per page) are extracted from DB and provided to FE.
    - It also reduces traffic overload and execution time (prevent delivering too much data at once)
- View only posts written by users who are followed by logged in users
    1. Get the user ID you follow.
    2. Sort the posts written by the ID by the latest order by the size of the pagination.
- Increase efficiency by using Flag to return only the information needed for Feed Main
- Like / Collection / Review
    - Click the Like and Collection button to see easily the results of the status change in FE (toggle)
    
#### Detail Page
- Like / Collection / Review
    - Click the Like and Collection button to see easily the results of the status change in FE (toggle)
- Review - Create / Read / Delete
    - User information is returned to FE when a reivew is created
    
#### Collection(Scraped posts) Page
- Increase user convenience by allowing users to view collected posts on a page

### 📝 Feed (Special Options)
#### Create post
- Bulk INSERT
    - Store large amounts of data in DB with Bulk Insert
        - Minimize execution time, increase efficiency by using only one query
- Multer & AWS S3
    - Multer middleware for image upload
        1. Store image file from FE to S3
        2. Store S3 image url to DB
#### Search Products
- Receive keywords from FE with request query and search in DB
    - Return up to 10 items by sorting product information including keywords order by sales volume
    
### 🏞️ Promenade
Authorization after user authentication by verifying the JWT of the signed-in user before all APIs are runned.  
Displaying the location of the promenade using the map API (Kakao Map)
    
#### Main Page
- Efficient request from FE by using query parameters
- Increasing Query reuse when filtering by category (city, administrative district)
  - Minimize repeated use of similar SQL queries when viewing posts
    - Duplicate queries are declared with defaultQuery string only once, and then we joinned additional query

- Pagination
  - In order to support Page Nation of FE, default 9 datas (per page) are extracted from DB and provided to FE.
    - It also reduces traffic overload and execution time (prevent delivering too much data at once)
    
- Increase efficiency by using Flag to return only the information needed for Feed Main
- Like / Collection / Review
    - Click the Like and Collection button to see easily the results of the status change in FE (toggle)

#### Detail Page
- Store the information needed to use Kakao Map API in FE (place name, place ID, latitude, longitude)
- Like / Collection / Review
    - Click the Like and Collection button to see easily the results of the status change in FE (toggle)
- Review - Create / Read / Delete
    - User information is returned to FE when a reivew is created
    
#### Collection(Scraped posts) Page
- Increase user convenience by allowing users to view collected posts on a page
- Returns all the map information (place coordinates) of the collected post so that all place coordinates can be displayed on a single map.
    - Increase user convenience.

### 🛒 Carts
Authorization and authentication using JWT
- Verify logged-in user's JWT before all APIs are performed.

#### Add product to shopping cart / change quantity
- Implementing INSERT and UPDATE simultaneously within one API and one query using 'UPSERT'

#### Lookup Shopping cart / delete product in the cart
- Combine 'INNER JOIN' to get all information of the shopping cart with just one JWT (minimize information exposure and enhance security)
- Delete multiple shopping carts as a single query with Bulk Delete

</details>

<br>

## 💡 Improved Works
<details>
    <summary>Read more</summary>
    
### JWT is too weak...
- 💡 Social login & sign in with Kakao SDK for JavaScript
    - Improve both security and user convenience

### Our DB is in only BE's local...
- Could not share same DB & Could not test our module in the same environment
    - 💡 All team members use one DB in any time with AWS RDS
    - 💡 Share one DB when uploading an image file with AWS S3
    
### Inefficient FE-BE connection test
- Can run only one server at the same time
  - 💡 We changed port number of test branch
    
- We had to wait until our supervisor feedbacks to the pull request and merges to the main branch
    
- There are many sub branches. So when we had some module test, we had to checkout sub branches often
  - 💡 We made test branch & merge all sub branches to the test branch
    
- If the main branch and test branch are run at the same time, the debugger is attached to the test branch process instead of the main branch (can't debug).
- Switching test branches makes interrupt, also it's annoying to integrate the code.
  - 💡 Create an AWS EC2 instance and pull source code from the GitHub repository using git
    - Real-time testing is available
    
### Bulk Insert / Delete
- We had to use same queries with different values several times.
  - 💡 Make values into one array and use bulk insert / delete
    
### API Documentation
- I don't know what API I developed because I developed more than 20 😂
  - 💡 Let's try API documentation tool
    - Create Postman Team Workspace and invite team members
    - Check the updated API information in Postman
    
### Spaghetti code 🍝
- Too many bugs 🐞
    - 💡 TDD (ex : Jest)
    - 💡 When reporting issues from FE to BE, report error status code and error message.
        - It is helpful to catch issue quickly
    
</details>

<br>

## 🤔 Future Works (Trouble Shooting)

<details>
    <summary>Read more</summary>
 
- In the Dao Layer, Transaction(Query Runner) often works abnormally.
    - ☠️ The reason is unknown and the problem is not resolved... 😂
   
- When we tried VScode SSH remote debugging to AWS EC2 server, server responded very late.
    - ☠️ The reason is unknown...
    
- API Documentation Tool
    - Malform Header error is occured when Multer tested with Postman
      - 💡 Postman's own bug so we used Insomenia instead.
    - Is the Postman the best?
        - 💡 We can try other API documentation tool than Postman / Insomenia
            - ex) Swagger
    
</details>
